# Referrer Policy Demo
> ğŸ” A simple demonstration of how referrer policies work in HTML links

ä¸€å€‹ç°¡å–®çš„ç¶²é å°ˆæ¡ˆï¼Œç”¨æ–¼å±•ç¤ºå’Œå­¸ç¿’ HTML ä¸­çš„ referrer policyï¼ˆå¼•è–¦ä¾†æºæ”¿ç­–ï¼‰å¦‚ä½•é‹ä½œã€‚é©åˆç¶²é é–‹ç™¼åˆå­¸è€…å’Œå¯¦ç¿’ç”Ÿå­¸ç¿’ä½¿ç”¨ã€‚

## å°ˆæ¡ˆèªªæ˜

é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº† HTML é€£çµä¸­ referrer policy çš„å¯¦éš›é‹ä½œæ–¹å¼ï¼Œå¹«åŠ©é–‹ç™¼è€…ç†è§£ï¼š
- é è¨­çš„ referrer è¡Œç‚º
- å¦‚ä½•æ§åˆ¶ referrer è³‡è¨Šçš„å‚³é
- ä½¿ç”¨ `rel="noreferrer"` çš„æ•ˆæœ
- GA4 è¿½è¹¤è¡Œç‚ºå·®ç•°

## æª”æ¡ˆçµæ§‹

```
referrer-policy-demo/
â”œâ”€â”€ index.html      # ä¸»é é¢ï¼ŒåŒ…å«ä¸åŒè¨­å®šçš„é€£çµ
â”œâ”€â”€ result.html     # çµæœé é¢ï¼Œé¡¯ç¤º referrer è³‡è¨Š
â””â”€â”€ README.md       # èªªæ˜æ–‡ä»¶
```

## é‡è¦æ¦‚å¿µ

### Referrer æ˜¯ä»€éº¼ï¼Ÿ

HTTP Refererï¼ˆæ³¨æ„æ‹¼å¯«ä¸­ç¼ºå°‘ä¸€å€‹ rï¼‰æ˜¯ä¸€å€‹ HTTP headerï¼Œç”¨æ–¼æ¨™è­˜ä½¿ç”¨è€…æ˜¯å¾å“ªå€‹ç¶²é é€£çµéä¾†çš„ã€‚ç•¶ä½¿ç”¨è€…é»æ“Šé€£çµæˆ–æäº¤è¡¨å–®æ™‚ï¼Œç€è¦½å™¨æœƒè‡ªå‹•å°‡ç•¶å‰é é¢çš„ URL ä½œç‚º Referer å‚³é€çµ¦ç›®æ¨™ç¶²ç«™ã€‚

```
ç•¶ä½¿ç”¨è€…å¾ https://example.com/page1.html é»æ“Šé€£çµåˆ° https://example.com/page2.html
HTTP è«‹æ±‚æœƒåŒ…å«ï¼š
Referer: https://example.com/page1.html
```

### ç‚ºä»€éº¼éœ€è¦æ§åˆ¶ Referrerï¼Ÿ

1. **éš±ç§ä¿è­·**
   - é˜²æ­¢æ´©éœ²æ•æ„Ÿçš„ URL åƒæ•¸
   - é¿å…æš´éœ²å…§éƒ¨ç³»çµ±çµæ§‹
   - ä¿è­·ä½¿ç”¨è€…ç€è¦½æ­·å²

2. **å•†æ¥­æ•æ„Ÿè³‡è¨Šä¿è­·**
   - é˜²æ­¢ç«¶çˆ­å°æ‰‹åˆ†ææµé‡ä¾†æº
   - ä¿è­·å…§éƒ¨ç‡ŸéŠ·æ´»å‹•è³‡è¨Š
   - é¿å…æš´éœ²æœªå…¬é–‹çš„ä¿ƒéŠ·é€£çµ

3. **è·¨åŸŸå®‰å…¨**
   - æ¸›å°‘è·¨ç«™è«‹æ±‚å½é€ ï¼ˆCSRFï¼‰é¢¨éšª
   - æ§åˆ¶ç¬¬ä¸‰æ–¹ç¶²ç«™èƒ½ç²å–çš„è³‡è¨Š

### å®‰å…¨æ€§è€ƒé‡

#### æ½›åœ¨é¢¨éšª
1. **URL åƒæ•¸æ´©éœ²**
   ```
   https://bank.com/account?id=12345&token=abc123
   ```
   - è‹¥ä¸æ§åˆ¶ referrerï¼Œæ•æ„Ÿåƒæ•¸å¯èƒ½æ´©éœ²çµ¦ç¬¬ä¸‰æ–¹ç¶²ç«™

2. **ç³»çµ±çµæ§‹æš´éœ²**
   ```
   https://company.com/internal/admin/users
   ```
   - URL çµæ§‹å¯èƒ½æš´éœ²ç³»çµ±æ¶æ§‹å’Œæ¬Šé™å±¤ç´š

3. **èº«åˆ†é©—è­‰è³‡è¨Š**
   ```
   https://app.com/dashboard?session=xyz789
   ```
   - èªè­‰ token å¯èƒ½ç¶“ç”± referrer å¤–æ´©

#### ä¿è­·æªæ–½

1. **é é¢ç´šåˆ¥æ§åˆ¶**
   ```html
   <meta name="referrer" content="no-referrer">
   ```

2. **é€£çµç´šåˆ¥æ§åˆ¶**
   ```html
   <a href="..." rel="noreferrer">
   ```

3. **ä¼ºæœå™¨ç«¯é…ç½®**
   ```apache
   Referrer-Policy: no-referrer-when-downgrade
   ```

## GA4 æµé‡è¿½è¹¤è§€å¯Ÿ

### GA4 èˆ‡ Referrer Policy çš„é—œä¿‚
- `rel="noreferrer"` ä¸»è¦å½±éŸ¿ç€è¦½å™¨å±¤ç´šçš„ referrer è³‡è¨Šå‚³é
- GA4 é€éè‡ªå·±çš„è¿½è¹¤æ©Ÿåˆ¶ï¼Œä¸å— referrer policy å½±éŸ¿ï¼š
  - ä½¿ç”¨ first-party cookies
  - è¿½è¹¤ä½¿ç”¨è€…æœƒè©±
  - è¨˜éŒ„å®Œæ•´çš„ä½¿ç”¨è€…è¡Œç‚ºè·¯å¾‘
- å³ä½¿ç¶²é é–“çš„é€£çµè¨­å®šäº† `noreferrer`ï¼ŒGA4 å ±è¡¨ä¸­ä»èƒ½çœ‹åˆ°ï¼š
  - ä½¿ç”¨è€…ä¾†æº
  - è½‰æ›è·¯å¾‘
  - å®Œæ•´çš„ä½¿ç”¨è€…æ—…ç¨‹

## ä½¿ç”¨æ–¹å¼

1. å…‹éš†æ­¤å°ˆæ¡ˆï¼š
```bash
git clone https://github.com/your-username/referrer-policy-demo.git
```

2. åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿ `index.html`
3. é»æ“Šä¸åŒçš„é€£çµè§€å¯Ÿ referrer è¡Œç‚ºå·®ç•°

## æœ€ä½³å¯¦è¸å»ºè­°

1. **æ•æ„Ÿé é¢**
   - ä¸€å¾‹ä½¿ç”¨ no-referrer policy
   - é¿å…åœ¨ URL ä¸­åŒ…å«æ•æ„Ÿè³‡è¨Š
   - å¯¦ä½œé©ç•¶çš„ CSRF ä¿è­·

2. **ä¸€èˆ¬é é¢**
   - ä½¿ç”¨ same-origin æˆ– strict-origin policy
   - æ³¨æ„ç¬¬ä¸‰æ–¹é€£çµçš„ referrer æ§åˆ¶
   - å®šæœŸå¯©æŸ¥ referrer ç›¸é—œè¨­å®š

3. **é–‹ç™¼å»ºè­°**
   - ä½¿ç”¨ POST è€Œé GET å‚³é€æ•æ„Ÿè³‡æ–™
   - å¯¦ä½œé©ç•¶çš„æ¬Šé™æª¢æŸ¥æ©Ÿåˆ¶
   - ä¸ä¾è³´ referrer ä½œç‚ºå®‰å…¨æ§åˆ¶

## æ³¨æ„äº‹é …

- éœ€è¦ä½¿ç”¨ç¶²é ä¼ºæœå™¨ä¾†é‹è¡Œï¼ˆç›´æ¥é–‹å•Ÿæª”æ¡ˆå¯èƒ½ç„¡æ³•æ­£ç¢ºé¡¯ç¤ºçµæœï¼‰
- ä¸åŒç€è¦½å™¨å¯èƒ½æœ‰ç•¥å¾®ä¸åŒçš„è¡Œç‚º
- å»ºè­°æ­é…ç€è¦½å™¨çš„é–‹ç™¼è€…å·¥å…·è§€å¯Ÿç¶²è·¯è«‹æ±‚
- å»ºè­°åŒæ™‚è§€å¯Ÿ GA4 å ±è¡¨ä»¥äº†è§£å¯¦éš›è¿½è¹¤æ•ˆæœ

